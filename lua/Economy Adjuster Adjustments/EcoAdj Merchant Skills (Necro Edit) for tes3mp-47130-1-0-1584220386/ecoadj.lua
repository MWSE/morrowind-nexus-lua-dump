--[[
EcoAdjMerchantSkills (Necro Edit) for tes3mp.esp by aziwa
tes3mp 0.7.0
---------------------------
DESCRIPTION :
A script to implement "Necrolesian's Economy Adjuster Adjustments" (https://www.nexusmods.com/morrowind/mods/47130/?tab=posts) in tes3mp
---------------------------
INSTALLATION:

Install and activate "EcoAdjMerchantSkills (Necro Edit) for tes3mp.esp" with the tool of your choice or manually.

Save the file ecoadj.lua inside your server/scripts/custom folder.

Add the following line to customScripts.lua:

require("custom/ecoadj")

---------------------------
]]

local ecoadj = {}

ecoadj.scriptName = "ecoadj"


local ListNonTrainers = {"ten-tongues_weerhat", "addut-lamanu", "adondasi sadalvel", "agning", "agrippina herennia", "alarvyne indalas", "alcedonia amnis", "aldaril", "alds baro", "alenus vendu", "allding", "alusaron", "alveno andules", "amarie charien", "ancola", "andil", "andilu drothan", "anis seloth", "ano andaram", "anruin", "arangaer", "areas", "aren maren", "arenara", "arielle phiencel", "arrille", "aryne telnim", "ashuma-nud matluberib", "ashumanu eraishah", "ashur-dan", "ather belden", "audenian valius", "aunius autrus", "aurane frernis", "bacola closcius", "baissa", "balen andrano", "baleni salavel", "banor seran", "baren alen", "baro egnatius", "barusi venim", "basks_in_the_sun", "belwen", "benunius agrudilius", "bereditte jastal", "bervaso thenim", "bervyn lleryn", "berwen", "bevene releth", "bildren areleth", "bivale teneran", "blatta hateria", "boderi farano", "bols indalen", "both gro-durug", "brarayni sarys", "bratheru oran", "brathus dals", "bronrod_the_roarer", "brynjolfr", "burcanius varo", "roberto jodoin", "catia sosia", "chaplain ogrul", "cienne sintieve", "clagius clanler", "cocistian quaspus", "codus callonus", "craeita jullalian", "crito olcinius", "crulius pontanian", "dabienne mornardl", "dalam gavyn", "dalse adren", "dandera selaro", "danoso andrano", "danso indules", "daras aryon", "daron", "darvame hleran", "daynali dren", "daynas darys", "daynes redothril", "devas irano", "dilami androm", "dileno lloran", "diren vendu", "dirver relas", "dolyn rols", "dorisa darvel", "dralasa nithryon", "dralval andrano", "drarayne girith", "drelasa ramothran", "dronos llervu", "dulian", "dulnea ralaal", "dunel saryon", "edre retene", "elberoth", "elbert nermarc", "eldrilu dalen", "elegal", "elegnan", "elynu saren", "emelia duronia", "eraamion", "ergnir", "eris telas", "erla", "ernand thierry", "erranil", "ervona barys", "ery", "estoril", "ethasi rilvayn", "fadase selvayn", "falanaamo", "fanildil", "faras thirano", "farena arelas", "felara andrethi", "felayn andral", "felen maryon", "fenas madach", "fendryn drelvi", "ferele athram", "ferise varo", "fevyn ralen", "flacassia fauseius", "folms mirel", "folsi thendas", "folvys andalor", "fomesa tharys", "fonari indaren", "fonas retheran", "frik", "fryfnhild", "gadayn andarys", "gadela andus", "galen berer", "galero andaram", "galore salvi", "gals arethi", "galsa andrano", "galtis guvron", "galuro belan", "ganalyn saram", "garas seloth", "garothmuk gro-muzgub", "germia", "gilan daynes", "gils drelas", "gilyne omoren", "gindas ildram", "gladroon", "goldyn belaram", "gomeso sarano", "gorven menas", "guls llervu", "haema farseer", "hakar the candle", "hallvaror", "hannabi zabynatus", "heem_la", "heifnir", "helviane desele", "hession", "hetman abelmawia", "hinald", "hjotra the peacock", "hlendrisa seleth", "hodlismod", "hrundi", "ibarnadad assirnarari", "idonea munia", "ilen faveran", "imare", "iniel", "irgola", "irna maryon", "j'rasha", "janand maulinie", "jeanne", "jeanne andre", "jeleen", "jobasha", "jolda", "kaye", "kjeld", "kurapli", "lalatia varian", "lanabi", "landorume", "laurina maria", "llaalam madalas", "llandris thirandus", "llarara omayn", "llaros uvayn", "llathyno hlaalu", "llether vari", "lliros tures", "llorayna sethan", "lloros sarano", "lorbumol gro-aglakh", "lucretinaus olcinius", "malpenix blonia", "malven romori", "mamaea", "manara othan", "mandur omalen", "manicky", "manirai", "manse andus", "marasa aren", "maren uvaren", "masalinie merian", "massarapal", "mebestian ence", "meder nulen", "mehra drora", "mehra helas", "meldor", "melie frenck", "mertisi andavel", "mevel fererus", "mevure hlen", "milar maryon", "milie hastien", "minnibi selkin-adda", "miraso seran", "mirisa", "miun_gei", "moroni uvelas", "mororurg", "mossanon", "mug gro-dulob", "nalcarya of white haven", "nalis gals", "nalvilie saren", "namanian facian", "naspis apinia", "navam veran", "nebia amphia", "nelso salenim", "nerile andaren", "nevosi hlan", "nibani maesa", "nilvyn drothan", "niras farys", "nireli farys", "nivos drivam", "orero omothan", "orns omaren", "orrent geontene", "peragon", "peregrina cnisia", "perien aurelie", "pierlette rostorard", "punibi yahaz", "ra'tesh", "ra'virr", "radras", "ralds oril", "ralen tilvur", "ranosa gilvayn", "raril giral", "rarvela teran", "rathal barus", "ravoso aryon", "relms gilvilo", "rilvase avani", "rindral dralor", "rirnas athren", "rolasa oren", "roner arano", "s'virr", "sabrina vitellia", "saetring", "salam andrethi", "salen ravel", "salver lleran", "salyni nelvayn", "sanaso sarothran", "saras orelu", "sathyn andrano", "sauleius cullian", "savard", "scelian plebo", "sedam omalen", "sedris omalen", "sedyni veran", "seldus nerendus", "selkirnemus", "selvil sareloth", "selvura andrano", "sernsi drelas", "shadbak gra-burbug", "shenk", "shulki ashunbabi", "simine fralinie", "sinnammu mirpal", "sirilonwe", "snedbrir the smith", "solea nuccusius", "somutis vunnis", "sonummu zabamat", "sorosi radobar", "sottilde", "sunel hlas", "syloria siruliulus", "synnolian tunifus", "talmeni drethan", "talsi uvayn", "tanar llervi", "agronian guy", "tarvyn faren", "telis salvani", "telvon llethan", "tendris vedran", "teril savani", "tervur braven", "thaeril", "thanelen velas", "thongar", "thorek", "thormoor gray-wave", "thormoor_out", "thormoor_thirsk", "thervul serethi", "tinaso alan", "tiras sadus", "tivam sadri", "tonas telvani", "trasteve", "trivura arenim", "tunila omavel", "tusamircil", "tussi", "tuveso beleth", "uleni heleran", "ulfrun", "ulmiso maloren", "ungeleb", "ureso drath", "urfing", "urtiso faryon", "uulernil", "uvele berendas", "valveli arelas", "vasesius viciulus", "vaval selas", "verara rendo", "veresa alver", "verick gemain", "vevrana aryon", "wind_in_his_hair", "yagak gro-gluk", "yambagorn gor-shulor", "ygfa", "zanmulk sammalamus", "zebba benamamat", "zeno faustus"}

local ListTrainers = {"ababael timsar-dadisun", "abelle chriditte", "adairan lalansour", "addarnat assardidairan", "adibael hainnabibi", "adraria vandacia", "adusamsi assurnarairan", "aengoth", "aerin", "ahnassi", "ainat maessabibi", "ajira", "alfhedil elf-hewer", "almse arenim", "alveleg", "alven salas", "an-zaw", "anarenen", "anas ulven", "angoril", "arathor", "ardarume", "arnand liric", "arrinis cerunia", "arvama rathri", "arver rethul", "arvs raram", "arvyn llerayn", "asha-ammu kutebani", "assamanut sonnerralit", "assamma-idan", "assatlit assudnilamat", "assemmus", "assurdan serdimapal", "athesie andas", "athyn sarethi", "attelivupis catius", "aumsi", "aurnie vanne", "avon ravel", "avron gols", "avus belvilo", "badala velothren", "bakh gro-sham", "balan", "balen vendu", "balis sari", "baradras", "barnand erelie", "baurin", "bedenea nethan", "belas othren", "belos falos", "berela andrano", "big helende", "bogakh gro-mar", "boldrisa andrano", "bolnor andrani", "borwen", "brildraso nethan", "brothes oran", "bugdurash gra-gashel", "caccian hers", "caius cosades", "celegorn", "Chanil_Lee", "chirranirr", "cinia urtius", "cirwedh", "clecentor aerius", "arantamo", "crottus cedus", "cunius pelelius", "daldur sarys", "dalos golathyn", "danar dalomo", "delyna mandas", "depusanis denian", "dridas salvani", "dunsalipal dun-ahhe", "duvianus platorius", "edryno arethi", "elms llervu", "elo arethan", "elone", "elvas savel", "elvasea thalas", "emusette bracques", "endryn llethan", "erer darothril", "ernse llervu", "esar-don dunsamsi", "esdrufus harsinia", "estirdalin", "eydis fire-eye", "falvel arenim", "fandus puruseius", "fara", "faral retheran", "fasile charascel", "faulgor", "feldrelo sadri", "flaenia amiulusus", "folvalie omalor", "folyni dran", "forvse nerethi", "foves arenim", "galar rothan", "galasa uvayn", "galbedir", "garer danoran", "garila vedas", "garyn girith", "gildan", "gilyan sedas", "glush gro-dul", "godros", "golveso senim", "goras andrelo", "goren andarys", "guldrise dralor", "hairan mannanalit", "hanarai assutlanipal", "hasell", "hasphat antabolis", "hecerinde", "hickim", "hides_his_eyes", "hingor", "hirarend", "hlodala savel", "hloris farano", "hoki", "hreirek the lean", "huleeya", "hylf the harrier", "imsin the dreamer", "iratian albarnian", "iulus truptor", "ivrosa verethi", "j'zhirr", "kammu", "kanat assalatammis", "khargol gro-boguk", "kummu", "kund assarnibani", "ladia flarugrius", "lambug gra-lurn", "larrius varro", "lassinia mussillius", "lassour zenammu", "lauravenya", "leles birian", "letreius muco", "levus musilchiotus", "lirielle stoine", "llavesa drom", "llemisa marys", "llevas fels", "llirala sendas", "lliram alvor", "lliryn fendyn", "madrale thirith", "maeonius yentimilal", "mandran indrano", "marayn dren", "massour asserrumusa", "mathesa helvi", "mathyn bemis", "mauhul gor-burish", "mavis nadram", "medila indaren", "mertis falandas", "mervs uvayn", "methal seran", "mevil molor", "minasi bavani", "minglos", "minisun ulirbabi", "mirvon andrethi", "missun akin", "mivanu retheran", "mondros balur", "mubdan esurnadarpal", "muriel sette", "musan zaintashara", "nachael", "nalasa sarothren", "naris selaren", "natesse", "navil ienith", "nedhelorn", "nels llendo", "nevos urns", "nidara herandus", "nileno dorvayn", "nilioniel", "nind dudnebisun", "nine_toes", "nirtunus crunus", "nuleno tedas", "odairan addaribantes", "odral helvi", "olumba gro-boglar", "onasha", "ondi", "onlyhestandsthere", "optio bologra", "pallia ceno", "patababi", "pelena acicius", "phane rielle", "procyon nigilius", "qorwynn", "radd hard-heart", "raflod the braggart", "raig", "ranis athrys", "raviso andalas", "ri'shajirr", "ridena othren", "rilas arethan", "rissinia", "rithleen", "rogdul gro-bularz", "ruccia conician", "sal pudashara", "salay yessur-disadon", "sarmosia vant", "saryn sarothril", "seanwen", "segunivus mantedius", "seliulus laenius", "senyndie", "avon oran", "serul dathren", "seryne relas", "sevyni saryon", "shakh gro-durga", "shamob gro-shatub", "shannat pansamsi", "shardie", "sharkub gro-khashnar", "sharn gra-muzgob", "shelur gra-yargul", "shipal zansatanit", "silius fulcinius", "sirollus saccus", "sjorvar horse-mouth", "skinkintreesshade", "snaglak gro-yak", "chargen class", "sodrara andalas", "sondryn irathi", "sovali uvayn", "sovisa adas", "sovor trandel", "stlubo otiustiris", "subenend urshummarnamus", "habasi", "sur surishpi", "surane leoriane", "suvryn doves", "talis drurel", "taluro athren", "taren omothan", "tedryn brenur", "tels girano", "tenaru romoren", "terenu uveran", "thaden ralas", "tharer rotheloth", "theldyn virith", "thovasi alen", "todwendy", "tongue_toad", "tralan", "traldrisa tervayn", "traven marvos", "tuls valen", "tyermaillin", "ulmesi baryon", "ulms drathen", "ultis salam", "ulumpha gra-sharob", "ulyno uvirith", "uradras sadalas", "urnel relas", "ushug gra-olurba", "uvoo llaren", "uvren tures", "vadusa sathryon", "aundae vampire 5", "vaveli dralas", "vedran balen", "vinnus laecinnius", "vonden mano", "vongvild", "wadarkhu", "wayn", "yahaz ashurnasaddas", "yakin bael", "yenammu", "zainat ahalkalun", "zairan enturnabaelul", "zallay subaddamael", "zallit assattadaishah", "zanat assarnuridan", "zanummu", "zelay sobbinisun", "zenabi samma"}




ecoadj.OnObjectActivate = function(eventStatus, pid, cellDescription, objects)
	if Players[pid] ~= nil and Players[pid]:IsLoggedIn() then
	
						for _, object in pairs(objects) do
							
							if tableHelper.containsValue(ListNonTrainers, string.lower(object.refId)) then
							logicHandler.RunConsoleCommandOnPlayer(pid, "\"" .. object.refId .. "\"->StartScript, HF_MerchantFix")	
							elseif tableHelper.containsValue(ListTrainers, string.lower(object.refId)) then
							logicHandler.RunConsoleCommandOnPlayer(pid, "\"" .. object.refId .. "\"->StartScript, HF_MerchantFixT")
							end
						end
	end
end

customEventHooks.registerHandler("OnObjectActivate", ecoadj.OnObjectActivate)
