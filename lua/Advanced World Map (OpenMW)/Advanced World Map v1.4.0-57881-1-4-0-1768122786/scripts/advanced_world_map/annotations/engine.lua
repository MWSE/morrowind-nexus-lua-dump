---@meta OpenMW.Engine

---@class Vector2
---@field x number
---@field y number
---@field xyz01 string swizzle support
---@field add fun(self: Vector2, v: Vector2): Vector2
---@field sub fun(self: Vector2, v: Vector2): Vector2
---@field mul fun(self: Vector2, k: number): Vector2
---@field div fun(self: Vector2, k: number): Vector2
---@field length fun(self: Vector2): number
---@field length2 fun(self: Vector2): number
---@field normalize fun(self: Vector2): Vector2 -- (also returns original length as 2nd return value)
---@field rotate fun(self: Vector2, angle: number): Vector2
---@field dot fun(self: Vector2, v: Vector2): number
---@field emul fun(self: Vector2, v: Vector2): Vector2
---@field ediv fun(self: Vector2, v: Vector2): Vector2

---@class Vector3
---@field x number
---@field y number
---@field z number
---@field xyz01 string swizzle support
---@field add fun(self: Vector3, v: Vector3): Vector3
---@field sub fun(self: Vector3, v: Vector3): Vector3
---@field mul fun(self: Vector3, k: number): Vector3
---@field div fun(self: Vector3, k: number): Vector3
---@field tostring fun(self: Vector3): string
---@field length fun(self: Vector3): number
---@field length2 fun(self: Vector3): number
---@field normalize fun(self: Vector3): Vector3 -- (also returns original length as 2nd return value)
---@field dot fun(self: Vector3, v: Vector3): number
---@field cross fun(self: Vector3, v: Vector3): Vector3
---@field emul fun(self: Vector3, v: Vector3): Vector3
---@field ediv fun(self: Vector3, v: Vector3): Vector3

---@class Vector4
---@field x number
---@field y number
---@field z number
---@field w number
---@field xyzw01 string swizzle support
---@field add fun(self: Vector4, v: Vector4): Vector4
---@field sub fun(self: Vector4, v: Vector4): Vector4
---@field mul fun(self: Vector4, k: number): Vector4
---@field div fun(self: Vector4, k: number): Vector4
---@field tostring fun(self: Vector4): string
---@field length fun(self: Vector4): number
---@field length2 fun(self: Vector4): number
---@field normalize fun(self: Vector4): Vector4 -- (also returns original length as 2nd return value)
---@field dot fun(self: Vector4, v: Vector4): number
---@field emul fun(self: Vector4, v: Vector4): Vector4
---@field ediv fun(self: Vector4, v: Vector4): Vector4

---@class Transform
---@field position Vector3
---@field rotation Vector3
---@field scale number

---@class openmw.util.Box
---@field center Vector3
---@field halfSize Vector3
---@field transform Transform
---@field vertices Vector3[]

---Color in RGBA format. All of the component values are in the range [0, 1].
---@class Color
---@field r number Red component
---@field g number Green component
---@field b number Blue component
---@field a number Alpha (transparency) component
---@field asRgba fun(self: Color): Vector4 Returns a Vector4 with RGBA components of the Color
---@field asRgb fun(self: Color): Vector3 Returns a Vector3 with RGB components of the Color
---@field asHex fun(self: Color): string Converts the color into a HEX string

---@class ObjectList
---@field items GameObject[] A list-like container of `GameObject`s

---@class ObjectOwner
---@field recordId string NPC who owns the object (nil if missing). Global and self scripts can set the value.
---@field factionId string Faction who owns the object (nil if missing). Global and self scripts can set the value.
---@field factionRank number Rank required to be allowed to pick up the object (`nil` if any rank is allowed). Global and self scripts can set the value.

---@class PathGridPoint
---@field autoGenerated boolean True if this node was automatically generated in the editor.
---@field relativePosition Vector3 The point's position relative to the cell's origin.
---@field connections PathGridPoint[] A list of points connected to this point.

---@class PathGrid
---@field points PathGridPoint[] List of points in the path grid.

---A cell of the game world.
---@class Cell
---@field name string Name of the cell (can be empty string).
---@field id string Unique record ID of the cell, based on cell name for interiors and the worldspace for exteriors, or the formID of the cell for ESM4 cells.
---@field region string Region of the cell.
---@field isExterior boolean Whether the cell is an exterior cell.
---@field isQuasiExterior boolean Deprecated. Whether the cell is a quasi exterior (like interior but with the sky and the weather).
---@field gridX number Index of the cell by X (only for exteriors).
---@field gridY number Index of the cell by Y (only for exteriors).
---@field worldSpaceId string Id of the world space.
---@field hasWater boolean True if the cell contains water.
---@field waterLevel number|nil The water level of the cell. (nil if cell has no water).
---@field hasSky boolean True if in this cell sky should be rendered.
---@field pathGrid PathGrid The cell's PathGrid if it has one.
---@field hasTag fun(self: Cell, tag: string): boolean
---@field isInSameSpace fun(self: Cell, object: GameObject): boolean
---@field getAll fun(self: Cell, type: any?): ObjectList

---Any object that exists in the game world and has a specific location.
---Player, actors, items, and statics are game objects.
---@class GameObject
---@field id string A unique id of this object (not record id), can be used as a key in a table.
---@field contentFile string Lower cased file name of the content file that defines this object; nil for dynamically created objects.
---@field enabled boolean Whether the object is enabled or disabled. Global scripts can set the value. Items in containers or inventories can't be disabled.
---@field position Vector3 Object position.
---@field scale number Object scale.
---@field rotation Transform Object rotation.
---@field startingPosition Vector3 The object original position
---@field startingRotation Transform The object original rotation
---@field owner ObjectOwner Ownership information
---@field cell Cell The cell where the object currently is. During loading a game and for objects in an inventory or a container `cell` is nil.
---@field parentContainer GameObject Container or actor that contains (or has in inventory) this object. It is nil if the object is in a cell.
---@field type any Type of the object (one of the tables from the package @{openmw.types#types}).
---@field count number Count (>1 means a stack of objects).
---@field recordId string Returns record ID of the object in lowercase.
---@field globalVariable string Global Variable associated with this object(read only).
---@field isValid fun(self: GameObject): boolean
---@field sendEvent fun(self: GameObject, eventName: string, eventData: any)
---@field activateBy fun(self: GameObject, actor: GameObject)
---@field addScript fun(self: GameObject, scriptPath: string, initData: table?)
---@field hasScript fun(self: GameObject, scriptPath: string): boolean
---@field removeScript fun(self: GameObject, scriptPath: string)
---@field setScale fun(self: GameObject, scale: number)
---@field teleport fun(self: GameObject, cellOrName: any, position: Vector3, options: any?)
---@field moveInto fun(self: GameObject, dest: any)
---@field remove fun(self: GameObject, count: number?)
---@field split fun(self: GameObject, count: number): GameObject
---@field getBoundingBox fun(self: GameObject): openmw.util.Box

---Alignment values (details depend on the specific property). For horizontal alignment the order is left to right, for vertical alignment the order is top to bottom.
---@class ALIGNMENT
---@field Start string
---@field Center string
---@field End string

---All available widget types
---@class TYPE
---@field Widget string Base widget type
---@field Text string Display text
---@field TextEdit string Accepts user text input
---@field Window string Can be moved and resized by the user
---@field Image string Displays an image
---@field Flex string Aligns widgets in a row or column
---@field Container string Automatically wraps around its contents

---Template
---@class Template
---@field props table
---@field content Content
---@field type string One of the values in TYPE, serves as the default value for the Layout

---Layout
---@class Layout
---@field type string Type of the widget, one of the values in TYPE. Must match the type in Template if both are present
---@field layer string|nil Optional layout to display in. Only applies for the root widget. Note: if the Element isn't attached to anything, it won't be visible!
---@field name string|nil Optional name of the layout. Allows access by name from Content
---@field props table|nil Optional table of widget properties
---@field events table|nil Optional table of event callbacks
---@field content Content|nil Optional Content of children layouts
---@field template Template|nil Optional Template
---@field external table|nil Optional table of external properties
---@field userData any Arbitrary data for you to use, e. g. when receiving the layout in an event callback

---Content. An array-like container, which allows to reference elements by their name.
---Implements List of Layout or Element and Map of string to Layout or Element.
---@class Content
---@field [number] Layout|Element Array-like access to elements
---@field [string] Layout|Element Map-like access to elements by name
---@field insert fun(self: Content, index: number, layoutOrElement: Layout|Element|table) Puts the layout at given index by shifting all the elements after it
---@field add fun(self: Content, layoutOrElement: Layout|Element|table) Adds the layout at the end of the Content (same as calling insert with last index + 1)
---@field indexOf fun(self: Content, layoutOrElement: Layout|Element|table): number|nil Finds the index of the given layout. If it is not in the container, returns nil

---Element. An element of the user interface
---@class Element
---@field layout Layout Access or replace the element's layout. Note: Is reset to nil on destroy
---@field update fun(self: Element) Refreshes the rendered element to match the current layout state. Refreshes positions and sizes, but not the layout of the child Elements.
---@field destroy fun(self: Element) Destroys the element

---Mouse event, passed as an argument to relevant UI events
---@class MouseEvent
---@field position Vector2 Absolute position of the mouse cursor
---@field offset Vector2 Position of the mouse cursor relative to the widget
---@field button number|nil Mouse button which triggered the event. Matches the arguments of openmw_input.isMouseButtonPressed (nil for none, 1 for left, 3 for right).

---A texture ready to be used by UI widgets
---@class TextureResource